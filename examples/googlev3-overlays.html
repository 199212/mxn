<html>
<head>
	<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script>
	<script type="text/javascript">
	var googlev3_key = 'AIzaSyDW21lnrSsBk4OyHUDmBQ7su9di3yMaO7I';
	</script>
	<script type="text/javascript" src="../source/mxn.js?(googlev3,[autoload])"></script>
	<script type="text/javascript">

	function defaultBaseMapHandler(name, source, args) {
		console.log(name + ' for ' + args.baseMap.label);
	}

	function defaultOverlayHandler(name, source, args) {
		console.log(name + ' for ' + args.overlayMap.label);
	}
	
	$(document).ready(function() {
		var props = {
			controls: {
				pan: true,
				zoom: 'large',
				overview: true,
				scale: true,
				map_type: true
			},
			center: new mxn.LatLonPoint(51.50730, -0.12763),
			zoom: 8,
			map_type: mxn.Mapstraction.ROAD
		};
		var map = new mxn.Mapstraction('map', 'googlev3', props);

		map.baseMapAdded.addHandler(defaultBaseMapHandler);
		map.overlayMapAdded.addHandler(defaultOverlayHandler);
		
		var basemaps = {
			osm: new mxn.BaseMap('http://{S}.tile.openstreetmap.org/{Z}/{X}/{Y}.png',
								'OSM',
								'CC-BY-SA © OpenStreetMap contributors',
								1.0,
								1,
								18,
								['a', 'b', 'c']),
			esri: new mxn.BaseMap(
'http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
						'ESRI',
						'Tiles &copy; Esri',
						1.0,
						1,
						18
						)
		};
		
		for (bm in basemaps) {
			basemaps[bm].baseMapShown.addHandler(defaultBaseMapHandler);
			basemaps[bm].baseMapHidden.addHandler(defaultBaseMapHandler);
		}
		
		var overlays = {
			toner: new mxn.OverlayMap(
							'http://tile.stamen.com/toner/{Z}/{X}/{Y}.png',
							'Toner',
							'CC-BY-SA © OpenStreetMap contributors',
							0.5,
							1,
							18),
			watercolor: new mxn.OverlayMap(
							'http://tile.stamen.com/watercolor/{Z}/{X}/{Y}.png',
							'Watercolor',
							'CC-BY-SA © OpenStreetMap contributors',
							0.5,
							1,
							18),
			weather: new mxn.OverlayMap(
						'http://tile.openweathermap.org/map/pressure_cntr/{z}/{x}/{y}.png',
						'Weather',
						'CC-BY-SA © OpenStreetMap contributors',
						1.0,
						1,
						18)
		};

		for (om in overlays) {
			overlays[om].overlayMapShown.addHandler(defaultOverlayHandler);
			overlays[om].overlayMapHidden.addHandler(defaultOverlayHandler);
		}

		$('#add-osm').click(function() {
			map.addBaseMap(basemaps.osm);
		});
		$('#hide-osm').click(function() {
			basemaps.osm.hide();
		});

		$('#add-esri').click(function() {
			map.addBaseMap(basemaps.esri);
		});
		$('#hide-esri').click(function() {
			basemaps.esri.hide();
		});

		$('#add-toner').click(function() {
			map.addOverlayMap(overlays.toner);
		});
		$('#hide-toner').click(function() {
			overlays.toner.hide();
		});

		$('#add-watercolor').click(function() {
			map.addOverlayMap(overlays.watercolor);
		});
		$('#hide-watercolor').click(function() {
			overlays.watercolor.hide();
		});

		$('#add-weather').click(function() {
			map.addOverlayMap(overlays.weather);
		});
		$('#hide-weather').click(function() {
			overlays.weather.hide();
		});
	});
	</script>
	<style type="text/css">
	#map {
		width: 100%;
		height: 95%;
	}
	#nav {
		font: 400 17px/1.3 "Helvetica Neue", sans-serif;
	}
	</style>
</head>
<body>
	<div id="map"></div>
	<div id="nav">
		<strong>Base Maps:</strong> <em>OSM</em> : <a href="#" id="add-osm">Show</a>|<a href="#" id="hide-osm">Hide</a>, <em>Esri</em> <a href="#" id="add-esri">Show</a>|<a href="#" id="hide-esri">Hide</a>, <strong>Overlays:</strong> <em>Toner</em> : <a href="#" id="add-toner">Show</a>|<a href="#" id="hide-toner">Hide</a> <em>Watercolor</em> : <a href="#" id="add-watercolor">Show</a>|<a href="#" id="hide-watercolor">Hide</a> <em>Pressure Contours</em> : <a href="#" id="add-weather">Show</a>|<a href="#" id="hide-weather">Hide</a>
	</div>
</body>
</html>